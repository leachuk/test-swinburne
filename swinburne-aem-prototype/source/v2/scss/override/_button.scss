// PLEASE NOTE!!
//
// This overrides only styles that aren't configurable by Bootstrap, please take
// care when making changes as we shouldn't be duplicating styles that Bootstrap
// generates for us automatically.

.btn {
  align-items: center;
  border-bottom-width: 0;
  display: inline-flex;
  height: 50px;
  letter-spacing: -.5px;
  min-width: 175px;
  position: relative;

  // Colour variants
  //
  // Pattern:
  // <variant name>: ( <base colour>, <text colour>, <hover colour>, <shadow colour (on hover)>, <border colour (optional)>, <border colour (on hover, optional)> )
  $button-colours: (
    primary-red:        (theme-color('c1'), $white, null, #ad1914, null, null),
    primary-yellow:     (theme-color('c2'), $black, #ffd200, #fcb945, null, null),
    secondary-charcoal: (theme-color('c3'), $white, #58595b, $black, null, null),
    secondary-white:    ($white, $black, null, theme-color('g3'), null, null),
    secondary-outline:  (transparent, $black, null, theme-color('c3'), theme-color('g4'), theme-color('c3')),
  );

  @each $variant, $options in $button-colours {
    $base-colour: nth($options, 1);
    $border-colour: nth($options, 5);
    $border-hover-colour: nth($options, 6);
    $hover-colour: nth($options, 3);
    $is-secondary-outline: $variant == 'secondary-outline';
    $shadow-colour: nth($options, 4);
    $text-colour: nth($options, 2);

    &-#{$variant} {
      $border-colour: if($border-colour != null, $border-colour, $base-colour);

      background-color: $base-colour;
      // If no border colour is given we use the base colour to avoid hover state issues
      border-color: $border-colour;
      box-shadow: inset 0 -1px 0 $border-colour;
      color: $text-colour;

      &:not(:active) {
        $border-hover-colour: if($border-hover-colour != null, $border-hover-colour, $hover-colour);

        @include hover {
          background-color: $hover-colour;
          border-color: if($border-hover-colour != null, $border-hover-colour, $hover-colour);
          box-shadow: inset 0 -2px 0 $shadow-colour;
          color: $text-colour;

          @if $is-secondary-outline == true {
            .bg-dark & {
              border-color: currentColor;
              box-shadow: inset 0 -2px 0 currentColor;
              color: $white;
            }
          }
        }
      }

      &:active {
        color: $text-colour;
      }

      @if $is-secondary-outline == true {
        .bg-dark & {
          background-color: transparent;
          border-color: currentColor;
          box-shadow: inset 0 -1px 0 currentColor;
          color: $white;
        }
      }
    }
  }

  @include hover {
    // Hover padding offset to account for the box shadow that appears
    &:not(.btn-link):not(:active) .link-text {
      transform: translateY(-2px);
    }
  }

  &-sm {
    height: 40px;
  }

  &-lg {
    height: 60px;
  }

  // Override the link button styles
  &-link {
    color: $link-color;
    padding: 0;
  }

  // Disabled state
  &.disabled:not(.btn-link),
  &:disabled {
    background-color: theme-color('g4');
    border-color: theme-color('g4');
    box-shadow: none;
    color: #808285;

    &.btn-secondary-outline {
      background-color: transparent;
      border-color: rgba(#adadad, .5);
      box-shadow: inset 0 -1px 0 rgba(#adadad, .5);
      color: rgba(#808285, .5);

      .bg-dark & {
        border-color: rgba($white, .5);
        color: rgba($white, .5);
      }
    }
  }

  .link-text {
    transition: transform .15s ease-in-out;

    &::after {
      @extend .fal;
      @extend .fa-long-arrow-right::before;

      display: block;
      font-size: 18px;
      margin-left: auto;
    }
  }

  & + & {
    margin-top: $spacing-sm;

    @include media-breakpoint-up(md) {
      margin-left: 30px;
      margin-top: 0;
    }
  }

  @include media-breakpoint-down(sm) {
    // When the button isn't `.btn-lg` or `.btn-sm`, set the button styles correctly for mobile
    // devices which inherit the `.btn-sm` styles.
    &:not(&-sm):not(&-lg):not(&-link) {
      font-size: $btn-font-size-sm;
      height: 40px;
      line-height: $btn-line-height-sm;
    }
  }
}
